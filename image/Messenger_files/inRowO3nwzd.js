if (self.CavalryLogger) { CavalryLogger.start_js(["23oJr"]); }

__d("EventPlanTimeHelper",["DateConsts","EventReminderConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("EventReminderConstants").TimeErrorType,i={getTimeErrorType:function j(k){var l=new Date(k),m=new Date(),n=new Date(new Date().setFullYear(new Date().getFullYear()+1));if(l<=m)return h.PAST_TIME;else if(l>=n)return h.AFTER_ONE_YEAR;else return h.NO_ERROR},getDefaultDateTime:function j(k){if(k)return k*c("DateConsts").MS_PER_SEC;var l=new Date();l.setHours(l.getHours()+1);l.setMinutes(0);return l.getTime()}};f.exports=i}),null);
__d("EventPlanUtils",["EventRemindersGating","EventReminderStateStore","MercuryIDs","ShortProfiles","getPageIDFromThreadID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={isAllowedtoStartPlanWithRecipients:function i(j){__p&&__p();if(c("getPageIDFromThreadID")(j))return false;var k=c("MercuryIDs").getUserIDFromThreadID(j);if(k){var l=c("ShortProfiles").getNow(k);if(!l||!l.is_friend)return false}var m=c("EventReminderStateStore").getEvent(j);return!(m&&m.exists)&&c("EventRemindersGating").isCreateAllowed}};f.exports=h}),null);
__d("LightweightEventDateTimePicker.react",["ix","cx","fbt","invariant","DatePickerRestraints","EventPlanTimeHelper","EventReminderConstants","Image.react","React","XUICalendar.react","XUIDateTimePicker.react","emptyFunction","fbglyph"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("EventReminderConstants").TimeErrorType;l=babelHelpers.inherits(o,c("React").Component);m=l&&l.prototype;function o(p){m.constructor.call(this,p);this.$LightweightEventDateTimePicker1=function(q){var r=q.getTime(),s=c("EventPlanTimeHelper").getTimeErrorType(r);this.setState({dateTime:r,showTimeError:s});this.props.onDateTimeChange(r,s)}.bind(this);this.state={dateTime:this.props.initialDateTime,showTimeError:n.NO_ERROR}}o.prototype.render=function(){__p&&__p();var p=c("XUICalendar.react").normalizeDate(new Date()),q=[c("DatePickerRestraints").enforceDateIsNoEarlierThan(p)],r=void 0;switch(this.state.showTimeError){case n.PAST_TIME:r=j._("L\u2019heure de l\u2019\u00e9v\u00e8nement doit \u00eatre dans le futur.");break;case n.AFTER_ONE_YEAR:r=j._("S\u00e9lectionnez une date d\u2019ici \u00e0 un an.");break;case n.NO_ERROR:r=null;break;default:k(0)}return c("React").createElement("div",{className:"_lny"},c("React").createElement(c("XUIDateTimePicker.react"),{date:new Date(this.state.dateTime),dateIcon:c("React").createElement(c("Image.react"),{src:h("125721")}),dateRestraints:q,onChange:this.$LightweightEventDateTimePicker1,xuiError:r}),c("React").createElement("span",{className:"_lo4","aria-label":j._("Ic\u00f4ne horloge")}))};o.defaultProps={onDateTimeChange:c("emptyFunction")};f.exports=o}),null);
__d("LightweightEventLocationTypeahead.react",["cx","fbt","AddressTypeahead.react","AddressTypeaheadCaller","AddressTypeaheadDisplayOrder","AddressTypeaheadIntegration","AddressTypeaheadProvider","AddressTypeaheadSearchSourceConfig","AddressTypeaheadType","React","XUIContextualDialog.react","XUITypeaheadView.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=3,m="lightweight_events_creation";j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){"use strict";__p&&__p();k.constructor.call(this,o);this.$LightweightEventLocationTypeahead5=function(p){var q=this.$LightweightEventLocationTypeahead2(p),r=this.$LightweightEventLocationTypeahead3(p),s=this.$LightweightEventLocationTypeahead4(p);this.setState({queryString:r});this.props.onLocationSelect(q,r,s)}.bind(this);this.$LightweightEventLocationTypeahead6=function(event){var p="";if(event.target instanceof HTMLInputElement)p=event.target.value;this.setState({queryString:p});this.props.onLocationChange(p)}.bind(this);this.state={queryString:this.props.initialQueryString}}n.prototype.$LightweightEventLocationTypeahead2=function(o){"use strict";var p=o.getAuxiliaryData();if(p&&p.resultType&&p.resultType==="place")return p.locationID;return""};n.prototype.$LightweightEventLocationTypeahead3=function(o){"use strict";var p=o.getAuxiliaryData();if(p)if(p.freeformEntry)return p.selectedTitle;else if(p.resultType==="street")return o.getSubtitle();return o.getTitle()};n.prototype.$LightweightEventLocationTypeahead4=function(o){"use strict";var p=o.getAuxiliaryData();return p?p.full_address:""};n.prototype.$LightweightEventLocationTypeahead7=function(){"use strict";return new(c("AddressTypeaheadSearchSourceConfig"))(null,null,c("AddressTypeaheadProvider").HERE_THRIFT,c("AddressTypeaheadType").STREET_PLACE_TYPEAHEAD,c("AddressTypeaheadIntegration").STRING_MATCH,c("AddressTypeaheadDisplayOrder").INTERLEAVE,l,c("AddressTypeaheadCaller").LIGHTWEIGHT_EVENTS_CREATION)};n.prototype.focusInput=function(){"use strict";this.$LightweightEventLocationTypeahead1&&this.$LightweightEventLocationTypeahead1.focusInput()};n.prototype.componentDidMount=function(){"use strict";this.focusInput()};n.prototype.render=function(){"use strict";var o={};if(this.props.useDropDown==false)o={layerComponent:c("XUIContextualDialog.react"),layerPosition:"left",useDialog:true};return c("React").createElement(c("AddressTypeahead.react"),babelHelpers["extends"]({},this.props,{className:"_1t92",config:this.$LightweightEventLocationTypeahead7(),isFreeFormQueryAllowed:true,queryString:this.state.queryString,onSelectAttempt:this.$LightweightEventLocationTypeahead5,onChange:this.$LightweightEventLocationTypeahead6,placeholder:i._("Choisissez un lieu"),productTag:m,ref:function(p){return this.$LightweightEventLocationTypeahead1=p}.bind(this),layerComponent:this.props.layerComponent,layerPosition:this.props.layerPosition,useDialog:true,viewRenderer:this.props.viewRenderer}))};n.defaultProps={initialQueryString:"",layerComponent:c("XUIContextualDialog.react"),layerPosition:"left",onLocationChange:c("emptyFunction"),onLocationSelect:c("emptyFunction"),useDropDown:false,viewRenderer:c("XUITypeaheadView.react")};f.exports=n}),null);
__d("LightweightEventLocationRow.react",["cx","LightweightEventLocationTypeahead.react","React","ReactDOM","ShimButton.react","emptyFunction"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=262;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$LightweightEventLocationRow1=function(){if(this.props.disabled)return;this.setState({showTypeahead:true})}.bind(this);this.$LightweightEventLocationRow2=function(n,o,p){this.setState({locationName:o,locationAddress:p,showTypeahead:false});this.props.onLocationSelect(n,o,p)}.bind(this);this.state={locationName:this.props.initialLocationName,locationAddress:this.props.initialLocationAddress,showTypeahead:!this.props.initialLocationName}}l.prototype.render=function(){var m=this.state,n=m.locationName,o=m.locationAddress,p=m.showTypeahead,q=this.props,r=q.onLocationChange,s=q.useDropDown;if(!p)return c("React").createElement(c("ShimButton.react"),{className:"_16yp",onClick:this.$LightweightEventLocationRow1},c("React").createElement("div",null,c("React").createElement("div",{className:"_16yq"},n),c("React").createElement("div",{className:"_16yr"},o)));var t="left",u=c("ReactDOM").findDOMNode(this.refs.typeahead);if(u&&u instanceof Element&&u.getBoundingClientRect().left<k)t="right";return c("React").createElement(c("LightweightEventLocationTypeahead.react"),{initialQueryString:n,layerPosition:t,onLocationChange:r,onLocationSelect:this.$LightweightEventLocationRow2,useDropDown:s,ref:"typeahead"})};l.defaultProps={disabled:false,initialLocationName:"",initialLocationAddress:"",onLocationChange:c("emptyFunction"),onLocationSelect:c("emptyFunction"),useDropDown:false};f.exports=l}),null);
__d("ChangeChatTabColorDialog",["ix","cssVar","cx","fbt","Grid.react","Image.react","MercuryThreads","MessagingThreadCustomizationConfig","MessengerCustomThreadColorButtonReact.bs","MessagingThreadCustomizationSource","React","SimpleXUIDialog","MercuryThreadActions","XUIDialogCancelButton.react","convertMIGColorToFIGColor","fbglyph"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=c("Grid.react").GridItem,m=c("MercuryThreads").get(),n=c("MessengerCustomThreadColorButtonReact.bs").jsComponent,o=c("MercuryThreadActions").get(),p="Unknown Color",q={show:function s(t,u){var v=m.getThreadMetaNow(t),w=v&&v.custom_color?v.custom_color:"#0084ff",x=355,y=null,z=["#0084ff"].concat(c("MessagingThreadCustomizationConfig").colorChoices),A=c("MessagingThreadCustomizationConfig").colorNames,B=z.map(function(F){return c("React").createElement(l,{key:F,className:"_gs0"},c("React").createElement("div",null,F.toLowerCase()==w.toLowerCase()?c("React").createElement(c("Image.react"),{className:"_gs2",src:h("114570")}):null,c("React").createElement(n,{colorChoice:c("convertMIGColorToFIGColor")(F)||F,colorName:A[F]||p,isSelected:F===w,onChoose:function G(){r(y,t,F,w)}})))}),C=k._("Choisissez une couleur pour cette conversation"),D=c("React").createElement("div",{className:"_gs3 _430z"},c("React").createElement("div",{className:"_28he"},k._("Tous les participants de cette conversation le verront.")),c("React").createElement(c("Grid.react"),{cols:5,className:"_gs4"},B)),E=c("React").createElement("div",null,c("React").createElement(c("XUIDialogCancelButton.react"),null));y=c("SimpleXUIDialog").showEx(D,C,E,null,{width:x,causalElement:u})}};function r(s,t,u,v){if(u!=v){o.changeThreadColor(t,u,c("MessagingThreadCustomizationSource").SETTINGS);if(s)s.hide()}}f.exports=q}),null);
__d("LightweightEventType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EVENT:"EVENT",CALL:"CALL",DIRECT_M:"DIRECT_M"})}),null);
__d("XCreateEventReminderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/eventreminder/create/",{acontext:{type:"String",required:true},event_type:{type:"Enum",required:true,enumType:1},event_time:{type:"Int"},thread_id:{type:"Int",required:true},title:{type:"String"},location_id:{type:"String"},location_name:{type:"String"},related_event_id:{type:"Int"}})}),null);
__d("ChatStartPlanDialogHelper",["cx","fbt","AsyncRequest","DateConsts","EventPlanTimeHelper","EventReminderConstants","EventRemindersGating","EventsActionsLogger","FBJSON","LightweightEventDateTimePicker.react","LightweightEventLocationRow.react","LightweightEventType","MercuryIDs","React","SimpleXUIDialog","DialogX","XCreateEventReminderController","XUIButton.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("EventReminderConstants").TimeErrorType;"use strict";function k(){__p&&__p();this.$ChatStartPlanDialogHelper9=function(l,m){this.$ChatStartPlanDialogHelper1=l;this.$ChatStartPlanDialogHelper6=m}.bind(this);this.$ChatStartPlanDialogHelper11=function(l){this.$ChatStartPlanDialogHelper3="";this.$ChatStartPlanDialogHelper4=l;this.$ChatStartPlanDialogHelper5=""}.bind(this);this.$ChatStartPlanDialogHelper12=function(l,m,n){this.$ChatStartPlanDialogHelper3=l;this.$ChatStartPlanDialogHelper4=m;this.$ChatStartPlanDialogHelper5=n}.bind(this)}k.prototype.showDialog=function(l){this.$ChatStartPlanDialogHelper7();var m=null,n=this.$ChatStartPlanDialogHelper8(),o=c("React").createElement("div",null,c("React").createElement(c("LightweightEventDateTimePicker.react"),{initialDateTime:this.$ChatStartPlanDialogHelper1,onDateTimeChange:this.$ChatStartPlanDialogHelper9}),c("React").createElement("hr",null),c("React").createElement(c("XUITextInput.react"),{className:"_2l1n","aria-label":i._("Nom de l\u2019\u00e9v\u00e8nement"),placeholder:i._("Nom"),onChange:function(event){return this.$ChatStartPlanDialogHelper10(event)}.bind(this)}),c("React").createElement("hr",null),c("React").createElement(c("LightweightEventLocationRow.react"),{onLocationChange:this.$ChatStartPlanDialogHelper11,onLocationSelect:this.$ChatStartPlanDialogHelper12,useDropDown:true})),p=c("React").createElement(c("XUIButton.react"),{label:this.$ChatStartPlanDialogHelper13(),use:"confirm",onClick:function(){return this.$ChatStartPlanDialogHelper14(m,l)}.bind(this)});m=c("SimpleXUIDialog").showEx(o,n,p,null)};k.prototype.$ChatStartPlanDialogHelper7=function(){this.$ChatStartPlanDialogHelper1=c("EventPlanTimeHelper").getDefaultDateTime();this.$ChatStartPlanDialogHelper2="";this.$ChatStartPlanDialogHelper3="";this.$ChatStartPlanDialogHelper4="";this.$ChatStartPlanDialogHelper5="";this.$ChatStartPlanDialogHelper6=j.NO_ERROR};k.prototype.$ChatStartPlanDialogHelper10=function(event){this.$ChatStartPlanDialogHelper2=event.target.value};k.prototype.$ChatStartPlanDialogHelper14=function(l,m){if(this.$ChatStartPlanDialogHelper6!==j.NO_ERROR)return;var n=c("MercuryIDs").getThreadFBIDFromThreadID(m),o={action_history:[{surface:c("EventsActionsLogger").Surface.MESSENGER_CHAT_TAB,mechanism:c("EventsActionsLogger").Mechanism.MESSENGER_THREAD_SETTINGS}]},p=c("XCreateEventReminderController").getURIBuilder().setString("acontext",c("FBJSON").stringify(o)).setEnum("event_type",c("LightweightEventType").EVENT).setInt("event_time",Math.floor(this.$ChatStartPlanDialogHelper1/c("DateConsts").MS_PER_SEC)).setInt("thread_id",n).setString("title",this.$ChatStartPlanDialogHelper2).setString("location_id",this.$ChatStartPlanDialogHelper3).setString("location_name",this.$ChatStartPlanDialogHelper4);new(c("AsyncRequest"))(p.getURI()).setHandler(function(q){if(q.payload&&l)l.hide()}).send()};k.prototype.$ChatStartPlanDialogHelper8=function(){return c("EventRemindersGating").shouldUseNewName?i._("Projet"):i._("Rappel d\u2019\u00e9v\u00e8nement")};k.prototype.$ChatStartPlanDialogHelper13=function(){return c("EventRemindersGating").shouldUseNewName?i._("Cr\u00e9er un programme"):i._("Cr\u00e9er")};f.exports=new k()}),null);
__d("EditChatTabNicknameDialog",["cx","fbt","MercuryIDs","MessengerDialogHeader.react","MessengerTextWithEmojiInput.react","MessagingThreadCustomizationConfig","MessagingThreadCustomizationSource","MessengerDialogCancelButton.react","MessengerDialogButton.react","MessengerDialogFooter.react","MercuryThreadActions","React","SimpleXUIDialog"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("MercuryThreadActions").get(),k=400,l={show:function m(n,o,p,q,r){var s=null,t=c("MercuryIDs").getUserIDFromParticipantID(o.id),u=t===q?i._("Modifier votre pseudo"):i._("Modifier le pseudo de {personName}",[i.param("personName",o.name)]),v=c("React").createElement("div",{className:"_2c1u"},c("React").createElement(c("MessengerDialogHeader.react"),null,u)),w=c("React").createElement("div",{className:"_2c1u"},c("React").createElement("div",{className:"_21g-"},c("React").createElement("div",{className:"_-bo"},i._("Tous les participants de cette conversation le verront.")),c("React").createElement(c("MessengerTextWithEmojiInput.react"),{className:"_2c1v",initialValue:p,onReturn:function(){return this._handleSave(s,n,o,p)}.bind(this),maxLength:c("MessagingThreadCustomizationConfig").maxNicknameLength,placeholder:o.name}))),x=c("React").createElement("div",{className:"_2c1u"},c("React").createElement(c("MessengerDialogFooter.react"),null,c("React").createElement(c("MessengerDialogCancelButton.react"),null),c("React").createElement(c("MessengerDialogButton.react"),{label:i._("Enregistrer"),onClick:function(){return this._handleSave(s,n,o,p)}.bind(this),type:"primary"})));s=c("SimpleXUIDialog").showEx(w,v,x,null,{NICKNAME_DIALOG_WIDTH:k,causalElement:r})},_handleSave:function m(n,o,p,q){if(!n)return;var r=n._reactContainer.querySelector("[data-text]").textContent;if(r!==q)j.changeThreadNicknames(o,c("MercuryIDs").getUserIDFromParticipantID(p.id),r,c("MessagingThreadCustomizationSource").SETTINGS);n.hide()}};f.exports=l}),null);
__d("EditChatTabNicknamesDialog",["cx","fbt","EditChatTabNicknameDialog","immutable","ImmutableObject","MercuryThreads","MercuryIDs","MessengerAdminGroupUtils","MercuryParticipants","MessengerContactList.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerScrollableArea.react","React","SimpleXUIDialog","XUIDialogCancelButton.react","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("MercuryThreads").get(),k=200,l=350,m={show:function n(o,p,q){__p&&__p();var r=null,s=j.getThreadMetaNow(o),t=c("immutable").Map().withMutations(function(z){if(!s)return;s.participants&&s.participants.forEach(function(A){z.set(A,c("MercuryParticipants").getOrFetch(A))});s.is_subscribed&&z.set(c("MercuryIDs").getParticipantIDFromUserID(p),c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(p)))}),u=c("MessengerAdminGroupUtils").isJoinableThread(s),v=t.filter(function(z){if(!z)return false;var A=c("MercuryIDs").getUserIDFromParticipantID(z.id);return u&&A===p||!u}).toArray(),w=c("React").createElement("div",{className:"_4h9n"},c("React").createElement(c("MessengerDialogHeader.react"),null,c("React").createElement(c("MessengerDialogTitle.react"),null,i._("Modifier les surnoms")))),x=c("React").createElement("div",{className:"_4h9n"},c("React").createElement("div",{className:"_4h9o"},c("React").createElement(c("MessengerScrollableArea.react"),{height:"100%"},c("React").createElement(c("MessengerContactList.react"),{contactAdapter:function(z){return this._fromMercuryParticipant(z,s)}.bind(this),disableRole:true,listSections:c("immutable").OrderedMap([[null,v]]),onSelect:function(z){r&&r.hide();setTimeout(function(){return this._handleContactSelect(z,s,p)}.bind(this),k)}.bind(this),rowClassName:"_44kr",viewer:p,thread:s})))),y=c("React").createElement("div",null,c("React").createElement(c("XUIDialogCancelButton.react"),null));r=c("SimpleXUIDialog").showEx(x,w,y,null,{NICKNAME_DIALOG_WIDTH:l,causalElement:q})},_handleContactSelect:function n(o,p,q){var r,s=c("MercuryIDs").getUserIDFromParticipantID(o.id),t=((r=p)!=null?(r=r.custom_nickname)!=null?r[s]:r:r)||"",u=p.thread_id;c("EditChatTabNicknameDialog").show(u,o,t,q,this.linkRef)},_fromMercuryParticipant:function n(o,p){var q=c("MercuryIDs").getUserIDFromParticipantID(o.id),r=o.name,s="";if(p.custom_nickname&&p.custom_nickname[q]){r=p.custom_nickname[q];s=o.name}return new(c("ImmutableObject"))({alias:o.alias,uid:o.id,photo:o.image_src,title:r,subtitle:s,type:o.type,isMessengerUser:o.is_messenger_user,href:o.href})}};f.exports=m}),null);
__d("WebMessengerDeleteThreadDialog",["fbt","React","SimpleXUIDialog","MercuryThreadActions","XUIDialogButton.react","XUIDialogCancelButton.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("MercuryThreadActions").get(),j={show:function k(l,m,n,o){var p=h._("Supprimer cette conversation\u00a0?"),q=h._("La suppression de votre copie de cette conversation est irr\u00e9versible."),r=c("React").createElement("div",null,c("React").createElement(c("XUIDialogCancelButton.react"),null),c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:h._("Supprimer la conversation"),use:"confirm",onClick:function s(){i["delete"](l);m&&m()}}));c("SimpleXUIDialog").showEx(q,p,r,n,{causalElement:o})}};f.exports=j}),null);
__d("ChatDetailStack.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){var k=j.bottomDetail,l=j.topDetail;return c("React").createElement("div",{className:"_2rt2"},c("React").createElement("div",{className:"_2rt3"},l),c("React").createElement("div",{className:"_2rt4"},k))}f.exports=i}),null);
__d("ChatDialogConfirmationButtons.react",["fbt","React","XUIButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={confirmActionIndex:null},this.$ChatDialogConfirmationButtons1=function(q){var r=this.props.buttons,s=this.state.confirmActionIndex;if(!!s||s===0){this.setState({confirmActionIndex:null});var t=r[s];if(t)t.onClick()}}.bind(this),this.$ChatDialogConfirmationButtons2=function(){this.setState({confirmActionIndex:null})}.bind(this),m}k.prototype.render=function(){var l=this.props.buttons,m=this.state.confirmActionIndex,n=h._("Vraiment\u00a0?"),o=h._("Annuler");if(!!m||m===0)return c("React").createElement("span",null,c("React").createElement(c("XUIButton.react"),{key:"confim",label:n,onClick:this.$ChatDialogConfirmationButtons1,use:"confirm"},n),c("React").createElement(c("XUIButton.react"),{key:"cancel",label:o,onClick:this.$ChatDialogConfirmationButtons2},o));else return l.map(function(p,q){var r=p.label,s=p.onClick,t=p.requiresConfirmation;if(t)return c("React").createElement(c("XUIButton.react"),{key:"button-requiresConfirmation-"+q,label:r,onClick:function(){this.$ChatDialogConfirmationButtons3(q)}.bind(this)},r);else return c("React").createElement(c("XUIButton.react"),{key:"button-"+q,label:r,onClick:s},r)}.bind(this))};k.prototype.$ChatDialogConfirmationButtons3=function(l){this.setState({confirmActionIndex:l})};f.exports=k}),null);
__d("ChatGroupMembershipAdminTab.react",["cx","fbt","ChatDetailStack.react","ChatDialogConfirmationButtons.react","CurrentUser","FacepileRounded.react","MercuryIDs","MercuryThreadActions","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryThreadActions").get(),m=50;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){var o=this.props.admins,p=i._("Supprimer des administrateurs"),q=!!o.find(function(s){return s.id===c("MercuryIDs").getParticipantIDFromUserID(c("CurrentUser").getID())}),r=o.reduce(function(s,t){var u="",v=t.id,w=c("React").createElement("li",{className:"_2ll0 _2pi3",key:v},c("React").createElement("div",{className:"_3-8s"},c("React").createElement(c("FacepileRounded.react"),{imageSize:m,profiles:[{image_src:t.image_src,name:t.name}]})),c("React").createElement(c("ChatDetailStack.react"),{bottomDetail:u,topDetail:t.name}),q?c("React").createElement("div",null,c("React").createElement(c("ChatDialogConfirmationButtons.react"),{buttons:[{label:p,onClick:function(){this.$ChatGroupMembershipAdminTab1(v)}.bind(this),requiresConfirmation:true}]})):null);if(v===c("MercuryIDs").getParticipantIDFromUserID(c("CurrentUser").getID()))s.unshift(w);else s.push(w);return s}.bind(this),[]);return c("React").createElement("ul",null,r)};n.prototype.$ChatGroupMembershipAdminTab1=function(o){l.changeGroupAdmins(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),[c("MercuryIDs").getUserIDFromParticipantID(o)],false)};function n(){j.apply(this,arguments)}f.exports=n}),null);
__d("ChatGroupMembershipMembersTab.react",["cx","fbt","ChatDetailStack.react","ChatDialogConfirmationButtons.react","CurrentUser","FacepileRounded.react","MercuryIDs","MercuryThreadActions","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryThreadActions").get(),m=50;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ChatGroupMembershipMembersTab2=function(){l.leaveGroup(this.props.threadID)}.bind(this),p}n.prototype.render=function(){__p&&__p();var o=this.props,p=o.admins,q=o.participants,r=i._("Supprimer"),s=i._("D\u00e9signer comme administrateur"),t=i._("Quitter le groupe"),u=c("MercuryIDs").getParticipantIDFromUserID(c("CurrentUser").getID()),v=!!p.find(function(y){return y.id===u}),w=p.length===0,x=q.reduce(function(y,z){__p&&__p();var A=z.id,B=p.includes(z),C=z.id===u,D=B?i._("Administrateur"):null,E=[],F=v&&!B,G=C&&w;if(F||G)E.push({label:s,onClick:function(){this.$ChatGroupMembershipMembersTab1(A)}.bind(this),requiresConfirmation:true});if(C)E.push({label:t,onClick:this.$ChatGroupMembershipMembersTab2,requiresConfirmation:true});else if(v)E.push({label:r,onClick:function(){this.$ChatGroupMembershipMembersTab3(A)}.bind(this),requiresConfirmation:true});var H=c("React").createElement("li",{className:"_33zx _2pi3",key:A},c("React").createElement("div",{className:"_3-8s"},c("React").createElement(c("FacepileRounded.react"),{imageSize:m,profiles:[{image_src:z.image_src,name:z.name}]})),c("React").createElement(c("ChatDetailStack.react"),{bottomDetail:D,topDetail:z.name}),c("React").createElement("div",null,c("React").createElement(c("ChatDialogConfirmationButtons.react"),{buttons:E})));if(A===c("MercuryIDs").getParticipantIDFromUserID(c("CurrentUser").getID()))y.unshift(H);else y.push(H);return y}.bind(this),[]);return c("React").createElement("ul",null,x)};n.prototype.$ChatGroupMembershipMembersTab3=function(o){l.removeFromGroup(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),c("MercuryIDs").getUserIDFromParticipantID(o))};n.prototype.$ChatGroupMembershipMembersTab1=function(o){l.changeGroupAdmins(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),[c("MercuryIDs").getUserIDFromParticipantID(o)],true)};f.exports=n}),null);
__d("ChatGroupMembershipRequestSetting.react",["cx","fbt","ChatDialogConfirmationButtons.react","MercuryThreadActions","MessengerApprovalModeTypes","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryThreadActions").get();j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$ChatGroupMembershipRequestSetting1=function(){var s=this.props.thread,t=s.approval_mode===c("MessengerApprovalModeTypes").APPROVALS;l.setApprovalMode(t?c("MessengerApprovalModeTypes").OPEN:c("MessengerApprovalModeTypes").APPROVALS,s)}.bind(this),o}m.prototype.render=function(){var n=this.props.thread,o=n.approval_mode===c("MessengerApprovalModeTypes").APPROVALS,p=o?i._("Approbation de l\u2019administrateur\u00a0: ACTIV\u00c9E."):i._("Approbation de l\u2019administrateur\u00a0: D\u00c9SACTIV\u00c9E."),q=o?i._("D\u00e9sactiver"):i._("Activer");return c("React").createElement("div",{className:"_32ly",key:"requestSettings"},c("React").createElement("div",{className:"_32lz"},p,c("React").createElement(c("ChatDialogConfirmationButtons.react"),{buttons:[{label:q,onClick:this.$ChatGroupMembershipRequestSetting1,requiresConfirmation:true}]})),c("React").createElement("div",{className:"_32l- _2pi2"},i._("Les administrateurs peuvent valider les nouvelles personnes ajout\u00e9es par des non-administrateurs ou les personnes qui sont invit\u00e9es \u00e0 rejoindre le groupe.")))};f.exports=m}),null);
__d("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1574519202665847"};j.getQueryID=function(){"use strict";return"337579896759283"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("ChatGroupMembershipRequestTab.react",["cx","fbt","ChatDetailStack.react","ChatDialogConfirmationButtons.react","ChatGroupMembershipRequestSetting.react","CurrentUser","FacepileRounded.react","immutable","MercuryIDs","MessengerApprovalModeTypes","React","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","WebGraphQL"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=50;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n=this.props,o=n.membershipParticipants,p=n.thread,q=n.threadID,r=p&&p.approval_mode===c("MessengerApprovalModeTypes").APPROVALS,s=p?p.group_approval_queue:[],t=r&&s&&s.length&&o?s.reduce(function(v,w){__p&&__p();var x=w.inviter,y=w.requester,z=o.find(function(D){return D.fbid===x.id}),A=o.find(function(D){return D.fbid===y.id});if(!A)return v;var B=[{label:i._("Approuver"),onClick:function(){this.$ChatGroupMembershipRequestTab1(q,y.id)}.bind(this),requiresConfirmation:true},{label:i._("Ignorer"),onClick:function(){this.$ChatGroupMembershipRequestTab2(q,y.id)}.bind(this),requiresConfirmation:true}],C=z?i._("Invitation de {inviter name}",[i.param("inviter name",z.name)]):null;v.push(c("React").createElement("li",{className:"_4y_j _2pi3",key:y.id},c("React").createElement("div",{className:"_3-8s"},c("React").createElement(c("FacepileRounded.react"),{imageSize:l,profiles:[{image_src:A.image_src,name:A.name}]})),c("React").createElement(c("ChatDetailStack.react"),{bottomDetail:C,topDetail:A.name}),c("React").createElement("div",null,c("React").createElement(c("ChatDialogConfirmationButtons.react"),{buttons:B}))));return v}.bind(this),[]):null,u=p?c("React").createElement(c("ChatGroupMembershipRequestSetting.react"),{key:"requestSettings",thread:p}):null;return[u,c("React").createElement("ul",{key:"requestSection"},t)]};m.prototype.$ChatGroupMembershipRequestTab1=function(n,o){c("WebGraphQL").exec(new(c("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:c("CurrentUser").getID(),thread_fbid:c("MercuryIDs").getThreadFBIDFromThreadID(n),user_ids:[o],response:"ACCEPT",surface:"WEB_ADMIN_MODEL_APPROVAL_CENTER"}}))};m.prototype.$ChatGroupMembershipRequestTab2=function(n,o){c("WebGraphQL").exec(new(c("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:c("CurrentUser").getID(),thread_fbid:c("MercuryIDs").getThreadFBIDFromThreadID(n),user_ids:[o],response:"DENY",surface:"WEB_ADMIN_MODEL_APPROVAL_CENTER"}}))};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("ChatGroupMembershipDialog.react",["ChatGroupMembershipAdminTab.react","ChatGroupMembershipMembersTab.react","ChatGroupMembershipRequestTab.react","CurrentUser","immutable","LayerFadeOnHide","MercuryIDs","React","XUIDialog.react","XUIDialogBody.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state={selectedTab:"chatGroupMembershipMembers"},this.$ChatGroupMembershipDialog1=function(p){this.setState({selectedTab:p})}.bind(this),l}j.prototype.render=function(){var k=this.props,l=k.thread,m=k.threadID,n=k.participants,o=k.membershipParticipants,p=l&&l.admin_ids||[],q=p.length>0,r=n.filter(function(v){return p.indexOf(c("MercuryIDs").getUserIDFromParticipantID(v.id))>-1||p.indexOf(v.id)>-1}),s=!!r.find(function(v){return v.id===c("MercuryIDs").getParticipantIDFromUserID(c("CurrentUser").getID())}),t=q?s?this.$ChatGroupMembershipDialog2():this.$ChatGroupMembershipDialog3():this.$ChatGroupMembershipDialog4(),u=c("React").createElement(c("ChatGroupMembershipMembersTab.react"),{admins:r,participants:n,threadID:m});if(this.state.selectedTab==="chatGroupMembershipAdmins"&&q)u=c("React").createElement(c("ChatGroupMembershipAdminTab.react"),{admins:r,threadID:m});else if(this.state.selectedTab==="chatGroupMembershipRequests"&&s)u=c("React").createElement(c("ChatGroupMembershipRequestTab.react"),{membershipParticipants:o,participants:n,thread:l,threadID:m});return c("React").createElement(c("XUIDialog.react"),{shown:this.props.dialogShown,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},onHide:this.props.onHide,isStrictlyControlled:true,label:"Membership",width:445},t,c("React").createElement(c("XUIDialogBody.react"),null,u))};j.prototype.$ChatGroupMembershipDialog3=function(){return c("React").createElement(c("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$ChatGroupMembershipDialog1},c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipMembers"},c("React").createElement("span",{id:"chatGroupMembershipMembers"},"Members")),c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipAdmins"},c("React").createElement("span",{id:"chatGroupMembershipAdmins"},"Admins")))};j.prototype.$ChatGroupMembershipDialog4=function(){return c("React").createElement(c("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$ChatGroupMembershipDialog1},c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipMembers"},c("React").createElement("span",{id:"chatGroupMembershipMembers"},"Members")))};j.prototype.$ChatGroupMembershipDialog2=function(){return c("React").createElement(c("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$ChatGroupMembershipDialog1},c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipMembers"},c("React").createElement("span",{id:"chatGroupMembershipMembers"},"Members")),c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipAdmins"},c("React").createElement("span",{id:"chatGroupMembershipAdmins"},"Admins")),c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"chatGroupMembershipRequests"},c("React").createElement("span",{id:"chatGroupMembershipRequests"},"Membership Requests")))};f.exports=j}),null);
__d("MNCommerceReviewDialogTextArea.react",["cx","AbstractTextArea.react","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=c("joinClasses")(this.props.className,"_3g_j");return c("React").createElement(c("AbstractTextArea.react"),babelHelpers["extends"]({},this.props,{className:l}))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MNCommerceReviewDialog.react",["fbt","cx","MessengerEnvironment","MNCommerceButton.react","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","React","StarsInput.react","MNCommerceReviewDialogTextArea.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(o,p){k.constructor.call(this,o,p);n.call(this);this.state=this.$MNCommerceReviewDialog1()}m.prototype.componentWillReceiveProps=function(o){this.setState(this.$MNCommerceReviewDialog1(o))};m.prototype.render=function(){var o=this.props.merchantName||"",p=this.state.rating>0,q=this.props.review||"",r=this.state.review||"",s=this.state.rating!==this.props.rating||r.length!==q.length||r!==q,t=h._("\u00c9crire un avis pour {label for merchant name}",[h.param("label for merchant name",o)]),u=h._("Annuler"),v=h._("Envoyer"),w=h._("Les options d\u2019examen n\u2019ont pas pu \u00eatre affich\u00e9es.");return c("React").createElement(c("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:w,onToggle:this.props.onToggle,shown:this.props.shown},this.props),c("React").createElement(c("MNCommerceDialogTitle.react"),{showCloseButton:true},t),c("React").createElement(c("MNCommerceDialogBody.react"),null,this.$MNCommerceReviewDialog2()),c("React").createElement(c("MNCommerceDialogFooter.react"),null,c("React").createElement(c("MNCommerceButton.react"),{label:u,onClick:this.props.onCancelButtonClick,use:"default"}),c("React").createElement(c("MNCommerceButton.react"),{label:v,onClick:this.$MNCommerceReviewDialog3,disabled:!p||!s,use:"confirm"})))};m.prototype.$MNCommerceReviewDialog2=function(){var o=c("MessengerEnvironment").messengerui,p=this.state.rating||0,q=this.state.review||"",r=(o?"_159y":"")+(!o?" _159z":""),s=(o?"_15a3":"")+" _15a4";return c("React").createElement("div",null,c("React").createElement("div",{className:s}," Rate your experience"),c("React").createElement(c("StarsInput.react"),{allowMultipleSubmissions:true,large:true,onClick:this.onStarsChangeClick,count:p}),c("React").createElement(c("MNCommerceReviewDialogTextArea.react"),{className:r,defaultValue:q,onChange:this.onReviewChange,placeholder:"Write a review..."}))};m.propTypes={error:l.object,loading:l.bool.isRequired,rating:l.number,review:l.string,merchantName:l.string,onCancelButtonClick:l.func,onConfirmButtonClick:l.func.isRequired,pageId:l.string};var n=function n(){__p&&__p();this.onStarsChangeClick=function(o){var p=this.state.review;this.onTypeChange(o,p)}.bind(this);this.onReviewChange=function(o){var p=this.state.rating;this.onTypeChange(p,o.target.value)}.bind(this);this.$MNCommerceReviewDialog1=function(o){var p=o||this.props,q=p.rating,r=p.review;return{rating:q,review:r}}.bind(this);this.onTypeChange=function(o,p){this.setState({rating:o,review:p})}.bind(this);this.$MNCommerceReviewDialog3=function(o){var p=this.props;p.onToggle(false);if(!p.onConfirmButtonClick)return;var q=p.pageId;p.onConfirmButtonClick(q,this.state.rating,this.state.review)}.bind(this)};f.exports=m}),null);
__d("MessengerPlatformBotReviewActions",["MessengerDispatcher","MNCommerceActionTypes"],(function a(b,c,d,e,f,g){"use strict";var h={stateLoaded:function i(j){c("MessengerDispatcher").dispatch({type:c("MNCommerceActionTypes").BOT_REVIEW_STATE.LOADED,state:j})},stateLoadError:function i(j){c("MessengerDispatcher").dispatch({type:c("MNCommerceActionTypes").BOT_REVIEW_STATE.LOAD_ERROR,pageID:j})},stateReload:function i(j){c("MessengerDispatcher").dispatch({type:c("MNCommerceActionTypes").BOT_REVIEW_STATE.RELOAD,pageID:j})}};f.exports=h}),null);
__d("XMessengerPlatformBotReviewReadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/platform/bot_review/read/",{page_id:{type:"FBID",required:true}})}),null);
__d("MessengerPlatformBotReviewReadDataManager",["AsyncRequest","MessengerPlatformBotReviewActions","XMessengerPlatformBotReviewReadController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.fetchReviewState=function(i){var j=c("XMessengerPlatformBotReviewReadController").getURIBuilder().setFBID("page_id",i).getURI();new(c("AsyncRequest"))().setURI(j).setHandler(this.$MessengerPlatformBotReviewReadDataManager1).setErrorHandler(this.$MessengerPlatformBotReviewReadDataManager2).send()};h.prototype.$MessengerPlatformBotReviewReadDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;if(i)i.payload.pageID=k;c("MessengerPlatformBotReviewActions").stateLoaded(i.payload)};h.prototype.$MessengerPlatformBotReviewReadDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c("MessengerPlatformBotReviewActions").stateLoadError(k)};function h(){}f.exports=new h()}),null);
__d("MessengerPlatformBotReviewStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MessengerPlatformBotReviewReadDataManager","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("MessengerDispatcher"));this.$MessengerPlatformBotReviewStore1=new(c("Cache"))()}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type,m=k.pageID||k.state&&k.state.pageID;switch(l){case c("MNCommerceActionTypes").BOT_REVIEW_STATE.LOADED:var n=k.state;this.$MessengerPlatformBotReviewStore1.set(m,c("LoadObject").empty().setValue(n),null,c("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case c("MNCommerceActionTypes").BOT_REVIEW_STATE.LOAD_ERROR:this.$MessengerPlatformBotReviewStore1.set(m,c("LoadObject").empty().setError(new Error("Unable to load permissions for: "+m)),null,c("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case c("MNCommerceActionTypes").BOT_REVIEW_STATE.RELOAD:if(m){this.$MessengerPlatformBotReviewStore1.set(m,c("LoadObject").loading());c("MessengerPlatformBotReviewReadDataManager").fetchReviewState(m)}this.__emitChange();break}};j.prototype.getReviewState=function(k){if(k&&!this.$MessengerPlatformBotReviewStore1.has(k)){this.$MessengerPlatformBotReviewStore1.set(k,c("LoadObject").loading().setValue({pageID:k}));c("MessengerPlatformBotReviewReadDataManager").fetchReviewState(k)}return this.$MessengerPlatformBotReviewStore1.get(k)||c("LoadObject").empty()};f.exports=new j()}),null);
__d("MNCommerceReviewDialogContainer.react",["MessengerPlatformBotReviewStore","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceReviewDialog.react","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").createClass({displayName:"MNCommerceReviewDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MessengerPlatformBotReviewStore"))],statics:{calculateState:function i(){var j=c("MNCommerceDialogStateStore").getState(),k=null;if(j)k=j.pageID;var l=c("MessengerPlatformBotReviewStore").getReviewState(k);return{shown:!!j,loading:l.isLoading(),onConfirmButtonClick:j&&j.onConfirmButtonClick,pageID:k,reviewState:l.getValue(),error:l.getError()}}},render:function i(){var j=this.state.reviewState;return c("React").createElement(c("MNCommerceReviewDialog.react"),{error:this.state.error,loading:this.state.loading,shown:this.state.shown,rating:j.rating,review:j.review,merchantName:j&&j.name,onCancelButtonClick:this._hideDialog,onConfirmButtonClick:this.state.onConfirmButtonClick,onToggle:this._onToggle,pageId:this.state.pageID})},_onToggle:function i(j){if(!j)this._hideDialog()},_hideDialog:function i(){c("MNCommerceDialogStateActions").hideDialog()}});f.exports=h}),null);
__d("MercuryThreadMuter",["AsyncDialog","AsyncRequest","DOM","MercuryThreadInfo"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={showMuteChangeDialog:function i(j,k){__p&&__p();c("AsyncDialog").send(new(c("AsyncRequest"))("/ajax/mercury/mute_thread_dialog.php").setRelativeTo(k),function(l){l.subscribe("confirm",function(){this.hide();var m=void 0;c("DOM").scry(this.getRoot(),'input[type="radio"]').forEach(function(n){if(n.checked)m=n.value});m=h.convertRawMuteSetting(m);e(["MercuryThreadActions"],function(n){n.get().updateMuteSetting(j,m)})}.bind(l))})},convertRawMuteSetting:function i(j){switch(j){case"always":return-1;case"30minutes":return 1800;case"1hour":return 3600;case"8hours":return 8*3600;case"24hours":return 24*3600;default:return 0}}};f.exports=h}),null);
__d("MNCommerceBotsReviewResponseDialog.react",["fbt","MessengerEnvironment","MNCommerceAttachmentConstants","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=c("MessengerEnvironment").messengerui?c("MNCommerceAttachmentConstants").MDOTCOMDIALOG.WIDTH:c("MNCommerceAttachmentConstants").DIALOG.WIDTH,m=this.props.success?h._("Merci d\u2019avoir donn\u00e9 votre avis\u00a0!"):h._("Une erreur est survenue"),n=this.props.success?h._("Votre avis a bien \u00e9t\u00e9 envoy\u00e9."):h._("Veuillez r\u00e9essayer");return c("React").createElement(c("XUIDialog.react"),babelHelpers["extends"]({autohide:2e3,width:l},this.props),c("React").createElement(c("XUIDialogTitle.react"),null,m),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",null,n)))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("MNCommerceBotsReviewConfirmationDialogContainer.react",["MNCommerceBotsReviewResponseDialog.react","MNCommerceDialogStateActions","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MNCommerceBotsReviewConfirmationDialogContainer1=function(p){if(!p)this.$MNCommerceBotsReviewConfirmationDialogContainer2()}.bind(this),this.$MNCommerceBotsReviewConfirmationDialogContainer2=function(){c("MNCommerceDialogStateActions").hideDialog()},l}j.prototype.render=function(){return c("React").createElement(c("MNCommerceBotsReviewResponseDialog.react"),{success:true,shown:true,onToggle:this.$MNCommerceBotsReviewConfirmationDialogContainer1})};f.exports=j}),null);
__d("MNCommerceBotsReviewErrorDialogContainer.react",["MNCommerceBotsReviewResponseDialog.react","MNCommerceDialogStateActions","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MNCommerceBotsReviewErrorDialogContainer1=function(p){if(!p)this.$MNCommerceBotsReviewErrorDialogContainer2()}.bind(this),this.$MNCommerceBotsReviewErrorDialogContainer2=function(){c("MNCommerceDialogStateActions").hideDialog()},l}j.prototype.render=function(){return c("React").createElement(c("MNCommerceBotsReviewResponseDialog.react"),{success:false,shown:true,onToggle:this.$MNCommerceBotsReviewErrorDialogContainer1})};f.exports=j}),null);
__d("XMessengerPlatformBotReviewWriteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/platform/bot_review/write/",{page_id:{type:"FBID",required:true},rating:{type:"Int",required:true},review:{type:"String"}})}),null);
__d("MessengerPlatformBotReviewWriteDataManager",["AsyncRequest","MessengerPlatformBotReviewActions","XMessengerPlatformBotReviewWriteController","MNCommerceBotsReviewErrorDialogContainer.react","MNCommerceBotsReviewConfirmationDialogContainer.react","MNCommerceDialogStateActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.prototype.review=function(i,j,k){var l=c("XMessengerPlatformBotReviewWriteController").getURIBuilder().setFBID("page_id",i).setInt("rating",j).setString("review",k).getURI();new(c("AsyncRequest"))().setURI(l).setHandler(this.$MessengerPlatformBotReviewWriteDataManager1).setErrorHandler(this.$MessengerPlatformBotReviewWriteDataManager2).send()};h.prototype.$MessengerPlatformBotReviewWriteDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c("MessengerPlatformBotReviewActions").stateReload(k);c("MNCommerceDialogStateActions").showDialog(c("MNCommerceBotsReviewConfirmationDialogContainer.react"),{})};h.prototype.$MessengerPlatformBotReviewWriteDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c("MessengerPlatformBotReviewActions").stateLoadError(k);c("MNCommerceDialogStateActions").showDialog(c("MNCommerceBotsReviewErrorDialogContainer.react"),{})};function h(){}f.exports=new h()}),null);
__d("MessengerPlatformSubscriptionActionWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"2017384271613026"};j.getQueryID=function(){"use strict";return"710976709095848"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("XMessagingGroupOptionsDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/dialog/group_options/",{thread_fbid:{type:"String",required:true},__asyncDialog:{type:"Int"}})}),null);
__d("ChatTabMenu.react",["cx","fbt","AsyncDialog","AsyncRequest","AutoFocusableLink.react","BootloadedComponent.react","ChangeChatTabColorDialog","ChatConfig","ChatGroupMembershipDialog.react","ChatPrivacyActionController","ChatStartPlanDialogHelper","CurrentUser","Dialog","EditChatTabNicknamesDialog","EventPlanUtils","EventRemindersGating","FantaMessageActions","FantaTabActions","GroupsActionURIConstants","ImmutableObject","JSResource","MenuSeparator.react","MercuryConfig","MercuryIDs","MercuryLogMessageType","MercuryParticipants","MercuryServerPayloadPreprocessor","MercurySourceType","MercuryThreadMuter","MercuryViewer","MessagingTag","MessengerAdminGroupUtils","MessengerDialogs.bs","MessengerMessageRequestsTypedLogger","MessengerPlatformBotReviewWriteDataManager","MessengerPlatformSubscriptionActionWebGraphQLMutation","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","MNCommerceReviewDialogContainer.react","NFXChatHeadGK","PopoverMenu.react","ReactComponentWithPureRenderMixin","React","ReactDOM","ReactMenu","ShimButton.react","Toggler","TrackingNodes","URI","WebGraphQL","WebMessengerConfirmBlockDialog","WebMessengerDeleteThreadDialog","WebMessengerThreadPermalinks","WorkFileUploadsGating","WorkModeConfig","XEventCreateDialogController","XMessagingGroupOptionsDialogController","XNFXStartForMessageThreadController","MercuryMessageObject","MercuryThreadActions","MercuryThreadIDMap","MercuryThreads","MercuryMessageActions","getPageIDFromThreadID","goURI","gkx","idx","isEmpty"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("MercuryMessageObject").get(),k=c("MercuryThreadActions").get(),l=c("MercuryThreadIDMap").get(),m=c("MercuryThreads").get(),n=c("MercuryMessageActions").get(),o=c("ReactMenu").Item,p=c("React").PropTypes,q=c("gkx")("AT6mUVDD74IWOTG0apJZF1LePh7SrhTQTrb19q8AoflSv5-DHG9ZPR3YfgtHmrA5yQIw4oTG7io_Cp0zzeQ4tvCvUxrq6ExcZIsaJQRg7A8JWA"),r=c("React").createClass({displayName:"ChatTabMenu",_privacyActionController:undefined,linkRef:undefined,mixins:[c("ReactComponentWithPureRenderMixin")],propTypes:{attachmentsShelf:p.object,autoFocus:p.bool,composer:p.object,hasMessageBlocked:p.bool,isEmptyChat:p.bool,isEmptyConversation:p.bool,isGroupChat:p.bool,isMultiCompany:p.bool,isPageChat:p.bool,membershipParticipants:p.object,nameConversationFunc:p.func,onMount:p.func,onSubmit:p.func,onUpdateAttachmentsShelf:p.func,onUploadFinished:p.func,otherUserID:p.string,participants:p.arrayOf(p.object),sheetController:p.object.isRequired,showAddFriend:p.func,thread:p.object,threadID:p.string.isRequired,viewer:p.string.isRequired},getInitialState:function s(){return{membersDialogShown:false,muted:false,privacyText:"",showReportPageDialog:false,url:null}},getDefaultProps:function s(){return{show:true,isMuted:false}},componentDidMount:function s(){c("WebMessengerThreadPermalinks").getThreadURI(this.props.threadID,function(t){this.isMounted()&&!c("MercuryIDs").isLocalThread(this.props.threadID)&&this.setState({url:t})}.bind(this));if(!this.props.isGroupChat)this._privacyActionController=new(c("ChatPrivacyActionController"))(c("MercuryIDs").getUserIDFromThreadID(this.props.threadID),function(t){return this._updatePrivacyLink(t)}.bind(this));this.props.onMount&&this.props.onMount(this)},componentWillUnmount:function s(){this._privacyActionController&&this._privacyActionController.destroy()},_unmuteThread:function s(){k.unmute(this.props.threadID);c("Toggler").hide()},_togglePrivacyFunc:function s(){this._privacyActionController&&this._privacyActionController.togglePrivacy()},_renderFileUploader:function s(){return c("React").createElement(o,{className:"_37_x"},c("React").createElement(c("ShimButton.react"),{className:"_4q61 itemAnchor",inline:true,onClick:function(){if(this.props.composer)c("FantaMessageActions").openUploadFilePicker(this.props.threadID,this.props.composer)}.bind(this)},i._("Ajouter des fichiers...")))},_fullConversationRedirect:function s(){c("goURI")(this.state.url)},_renderOpenFullConversation:function s(){if(this.state.url){var t=c("CurrentUser").isWorkUser()?i._("Ouvrir dans Workplace Chat"):i._("Ouvrir dans Messenger");return c("React").createElement(o,{href:this.state.url,onclick:this._fullConversationRedirect},t)}return null},_renderAddFriend:function s(){__p&&__p();if(!this.props.showAddFriend||c("getPageIDFromThreadID")(this.props.threadID)||this.props.isMultiCompany&&!this.props.isGroupChat)return null;var t=m.getThreadMetaNow(this.props.threadID),u=c("MessengerAdminGroupUtils").shouldInvite(t),v=c("MessengerAdminGroupUtils").isGroupChat(t),w=void 0;if(c("WorkModeConfig").is_work_user)w=i._("Ajouter des coll\u00e8gues pour discuter...");else if(u)w=i._("Inviter des amis dans la discussion...");else if(v)w=i._("Add Group Members to Chat...");else w=i._("Ajouter des amis \u00e0 la discussion...");return c("React").createElement(o,{onclick:this.props.showAddFriend},w)},_renderTogglePrivacy:function s(){if(!this.props.isGroupChat&&this.state.privacyText)return c("React").createElement(o,{onclick:this._togglePrivacyFunc},this.state.privacyText);return null},_canEditNickname:function s(){if(c("getPageIDFromThreadID")(this.props.threadID))return false;var t=m.getThreadMetaNow(this.props.threadID),u=c("CurrentUser").getID(),v=t&&t.participants&&u&&c("MessengerAdminGroupUtils").canUpdateThreadCustomization(t,u);return!!v},_renderEditNickname:function s(){if(!this._canEditNickname())return null;return c("React").createElement(o,{onclick:this._showEditNicknameDialog},i._("Modifier les surnoms"))},_renderChangeColor:function s(){if(c("getPageIDFromThreadID")(this.props.threadID))return null;var t=m.getThreadMetaNow(this.props.threadID),u=c("MercuryIDs").getUserIDFromParticipantID(c("MercuryViewer").getID()),v=t&&u&&c("MessengerAdminGroupUtils").canUpdateThreadCustomization(t,u);if(v&&c("ChatConfig").get("chat_tab_custom_color"))return c("React").createElement(o,{onclick:this._showCustomColorDialog},i._("Changer la couleur..."));return null},_renderMuteConversation:function s(){if(!this.props.isMuted){var t=c("MercuryThreadMuter").showMuteChangeDialog.bind(null,this.props.threadID,this.linkRef);return c("React").createElement(o,{onclick:t},i._("Mettre la conversation en sourdine..."))}else return c("React").createElement(o,{onclick:this._unmuteThread},i._("Reprendre la conversation"))},_renderDeleteConversation:function s(){return c("React").createElement(o,{onclick:this._deleteConversation},i._("Supprimer la conversation..."))},_renderReportSpam:function s(){var t=c("getPageIDFromThreadID")(this.props.threadID),u=i._("Signaler...");if(t)return c("React").createElement(o,{onclick:this._reportPageClicked},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("MNCommerceReportConversationDialog.react").__setRef("ChatTabMenu.react"),pageID:t,showDialog:this.state.showReportPageDialog,onToggle:this._handleReportPageToggle}),u);if(!this.props.isGroupChat&&!c("CurrentUser").isWorkUser())return c("React").createElement(o,{onclick:this._reportSpamClicked},u);return null},_manageMessagesItem:function s(){if(c("gkx")("AT6mUVDD74IWOTG0apJZF1LePh7SrhTQTrb19q8AoflSv5-DHG9ZPR3YfgtHmrA5yQIw4oTG7io_Cp0zzeQ4tvCvUxrq6ExcZIsaJQRg7A8JWA"))return null;if(this.props.isBusinessEnabled)return c("React").createElement(o,{onclick:this._messageManageClicked},i._("Manage Messages..."));return null},_manageReviewItem:function s(){if(!this.props.isBusinessEnabled)return null;return c("React").createElement(o,{onclick:this._reviewClicked},i._("Laisser un commentaire"))},getPageUserIfExists:function s(){var t=this.props,u=t.isPageChat,v=t.otherUserID,w=t.participants;if(!u||!v||!w||c("isEmpty")(w))return null;return w.find(function(x){return x.fbid===v})},_onSubscriptionActionClick:function s(){__p&&__p();var t=this.props.otherUserID;if(!t)return;var u=this.getPageUserIfExists();if(!u)return;var v=u.is_subscribed_to_page_updates,w=v?"UNSUBSCRIBE":"SUBSCRIBE";c("WebGraphQL").exec(new(c("MessengerPlatformSubscriptionActionWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:this.props.viewer,page_id:t,action_type:w}})).done(function(x){var y,z=(y=x)!=null?(y=y.messenger_platform_subscription_action)!=null?(y=y.page)!=null?y.is_viewer_subscribed_to_message_updates:y:y:y;if(z===null||z===undefined)return;this._updateSubscribed(z)}.bind(this))},_updateSubscribed:function s(t){__p&&__p();var u=this.props,v=u.isPageChat,w=u.otherUserID;if(!v||!w)return;var x=this.getPageUserIfExists();if(!x)return;var y=c("MercuryIDs").getParticipantIDFromUserID(w),z=c("MercuryParticipants").getOrFetch(y);if(z){z=c("ImmutableObject").set(z,{is_subscribed_to_page_updates:t});if(t)z=c("ImmutableObject").set(z,{is_messenger_blocked:false});var A={participants:[z]};c("MercuryServerPayloadPreprocessor").getForFBID(this.props.viewer).handleUpdate(A)}},_pageSubscriptionItem:function s(){if(!q)return null;if(c("CurrentUser").isWorkUser())return null;var t=this.getPageUserIfExists();if(!t)return null;var u=t.is_subscribed_to_page_updates,v=i._("Activer les mises \u00e0 jour"),w=i._("D\u00e9sactiver les mises \u00e0 jour"),x=u?w:v;return c("React").createElement(o,{onClick:this._onSubscriptionActionClick},x)},_onBlockPageActionClick:function s(){__p&&__p();if(!this.props.threadID)return;var t=this.getPageUserIfExists();if(!t)return;var u=t.is_messenger_blocked;if(u){k.unblockOnMessengerDotCom(this.props.threadID);this._updatePageBlocked(false)}else{k.blockOnMessengerDotCom(this.props.threadID);this._updatePageBlocked(true)}},_updatePageBlocked:function s(t){__p&&__p();var u=this.props,v=u.isPageChat,w=u.otherUserID;if(!v||!w)return;var x=this.getPageUserIfExists();if(!x)return;var y=c("MercuryIDs").getParticipantIDFromUserID(w),z=c("MercuryParticipants").getOrFetch(y);if(z){z=c("ImmutableObject").set(z,{is_messenger_blocked:t});if(t)z=c("ImmutableObject").set(z,{is_subscribed_to_page_updates:false});var A={participants:[z]};c("MercuryServerPayloadPreprocessor").getForFBID(this.props.viewer).handleUpdate(A)}},_blockPageMessagesItem:function s(){if(!q)return null;if(c("CurrentUser").isWorkUser())return null;var t=this.getPageUserIfExists();if(!t)return null;var u=t.is_messenger_blocked,v=i._("Bloquer"),w=i._("D\u00e9bloquer"),x=u?w:v;return c("React").createElement(o,{onClick:this._onBlockPageActionClick},x)},_blockMessagesItem:function s(){if(this.props.isBusinessEnabled||this.props.otherUserID&&this.props.otherUserID===c("CurrentUser").getID())return null;if(!this.props.isGroupChat&&!this.props.hasMessageBlocked&&!this.props.isEmptyConversation&&!c("CurrentUser").isWorkUser())return c("React").createElement(o,{onclick:this._messageBlockedClicked},i._("Bloquer les messages..."));if(!this.props.isGroupChat&&this.props.hasMessageBlocked)return c("React").createElement(o,{onclick:this._messageUnblockedClicked},i._("D\u00e9bloquer les messages..."));return null},_ignoreMessagesItem:function s(){if(this.props.isBusinessEnabled||this.props.otherUserID&&this.props.otherUserID===c("CurrentUser").getID()||this.props.hasMessageBlocked||c("CurrentUser").isWorkUser())return null;if(this.props.isGroupChat&&!c("gkx")("AT6sQjs7GRVhEipNW3TkmIJi_BHZa2KKyD-Mi9QicLxYmeTJYm7WWpq-_Rh-wyDoXW1BNvzANnO7tf1hMqNgPGMF"))return null;return c("React").createElement(o,{onclick:this._messageIgnoreClicked},i._("Ignorer les messages..."))},_renderCreateGroup:function s(){if(this.props.isGroupChat)return c("React").createElement(o,{onclick:this._createGroupClicked},i._("Cr\u00e9er un groupe"));return null},_renderCreateEvent:function s(){if(this.props.isGroupChat)return c("React").createElement(o,{onclick:this._createEventClicked},i._("Cr\u00e9er un \u00e9v\u00e8nement"));return null},_renderCreatePlan:function s(){if(c("EventPlanUtils").isAllowedtoStartPlanWithRecipients(this.props.threadID)){var t=c("EventRemindersGating").shouldUseNewName?i._("Cr\u00e9er un programme"):i._("Cr\u00e9er un rappel");return c("React").createElement(o,{onclick:this._onEventPlanButtonClicked},t)}return null},_renderConversationName:function s(){var t=m.getThreadMetaNow(this.props.threadID),u=c("MercuryIDs").getUserIDFromParticipantID(c("MercuryViewer").getID()),v=t&&u&&c("MessengerAdminGroupUtils").canUpdateThreadCustomization(t,u)&&this.props.isGroupChat&&!m.isEmptyLocalThread(this.props.threadID);if(v)return c("React").createElement(o,{onclick:this.props.nameConversationFunc},i._("Modifier le nom de la conversation"));return null},_renderLeaveConversation:function s(){if(this.props.isGroupChat)return c("React").createElement(o,{onclick:this._unsubscribeLinkClicked},i._("Quitter la conversation..."));return null},_openMembersDialog:function s(){c("MessengerDialogs.bs").showDialog(function(){if(this.props.participants)return c("React").createElement(c("ChatGroupMembershipDialog.react"),{dialogShown:true,membershipParticipants:this.props.membershipParticipants,onHide:this._onHideMembersDialog,participants:this.props.participants,thread:this.props.thread,threadID:this.props.threadID});return null}.bind(this))},_onHideMembersDialog:function s(){c("MessengerDialogs.bs").removeAllDialogs()},_renderPeopleList:function s(){if(this.props.isGroupChat&&!m.isEmptyLocalThread(this.props.threadID))if(c("gkx")("AT4Su_C_ES-4CrhD_D1dBW_m5KjlFcSb7961M1pyMtCzs7K6KHN0P9tI32lFZYJ_eyKAK3Q0Kgi-dtAf3S-EKL71")){if(this.props.participants)return c("React").createElement(o,{onclick:this._openMembersDialog},i._("Membres..."))}else return c("React").createElement(o,{onclick:this._showParticipants},i._("Modifier les participants..."));return null},_renderGroupOptions:function s(){var t=m.getThreadMetaNow(this.props.threadID),u=c("MercuryIDs").getUserIDFromParticipantID(c("MercuryViewer").getID());if(t&&u&&this.props.isGroupChat&&c("MessengerAdminGroupUtils").canSeeGroupOptions(true,t,u))return c("React").createElement(o,{onclick:this._showGroupOptions},i._("View Group Options"));return null},_renderToggleSecretMode:function s(){if(this.props.hasSecretModeOn)return c("React").createElement(o,{onclick:this._secretModeTurnOff},i._("D\u00e9sactivation des messages \u00e9ph\u00e9m\u00e8res"));return null},render:function s(){var t=this._renderReportSpam(),u=this._blockMessagesItem(),v=this._ignoreMessagesItem(),w=this._manageMessagesItem(),x=this._manageReviewItem(),y=this._renderCreateGroup(),z=this._renderCreateEvent(),A=this._renderGroupOptions(),B=this._pageSubscriptionItem(),C=this._blockPageMessagesItem(),D=c("React").createElement(c("ReactMenu"),{className:"chatReact"+(!this.props.show?" hidden_elem":"")},this._renderOpenFullConversation(),c("WorkFileUploadsGating").canUploadFiles?this._renderFileUploader():null,this._renderToggleSecretMode(),this._renderAddFriend(),this._renderTogglePrivacy(),this._renderConversationName(),this._renderPeopleList(),c("React").createElement(c("MenuSeparator.react"),null),A,A?c("React").createElement(c("MenuSeparator.react"),null):null,this._renderEditNickname(),this._renderChangeColor(),this._renderMuteConversation(),this._renderDeleteConversation(),this._renderLeaveConversation(),this._renderCreatePlan(),B?c("React").createElement(c("MenuSeparator.react"),null):null,B,t||u||v||w||x?c("React").createElement(c("MenuSeparator.react"),null):null,v,u,w,x,t,C,y||z?c("React").createElement(c("MenuSeparator.react"),null):null,y,z),E=i._("Options"),F=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.DROPDOWN_BUTTON);return c("React").createElement(c("PopoverMenu.react"),{menu:D,ref:"menu"},c("React").createElement(c("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,"data-ft":F,"data-hover":"tooltip","aria-label":E,"data-tooltip-alignh":"center","data-tooltip-content":E,className:"button"+(this.props.isEmptyChat?" hidden_elem":"")+" _3olv _1ll-",ref:function(G){return this.linkRef=c("ReactDOM").findDOMNode(G)}.bind(this),role:"button"}))},_updatePrivacyLink:function s(t){__p&&__p();var u=void 0;if(t==c("ChatPrivacyActionController").OFFLINE){u=i._("Passer en ligne");this.setState({privacyText:u});return}if(this.props.isGroupChat||this.props.otherUserID===undefined)return;var v="fbid:".concat(this.props.otherUserID);c("MercuryParticipants").get(v,function(w){if(!w.is_friend)u=null;else if(t==c("ChatPrivacyActionController").BLOCKED)u=i._("Activer la discussion instantan\u00e9e pour {name}",[i.param("name",w.short_name)]);else if(c("gkx")("AT6XJNxwV6KaJzyxn6EDe3Tm_qRFKRqe2qkOS_4ZLz8D2JxuLFBXYKOl65GgbN3cStXtdJ_4PUESVZvXZJiurCDl"))u="";else u=i._("D\u00e9sactiver la discussion instantan\u00e9e pour {name}",[i.param("name",w.short_name)]);this.setState({privacyText:u})}.bind(this))},_showEditNicknameDialog:function s(){var t=c("MercuryIDs").getUserIDFromParticipantID(c("MercuryViewer").getID());if(t)c("EditChatTabNicknamesDialog").show(this.props.threadID,t,this.linkRef)},_showCustomColorDialog:function s(){c("ChangeChatTabColorDialog").show(this.props.threadID,this.linkRef)},_showParticipants:function s(){l.getServerIDFromClientID(this.props.threadID,function(t){c("AsyncDialog").send(new(c("AsyncRequest"))(new(c("URI"))("/ajax/browser/dialog/multichat_members/").addQueryData({id:t})))})},_unsubscribeLinkClicked:function s(){__p&&__p();var t=[];t.push({name:"unsubscribe",label:i._("Quitter la conversation"),handler:function(){return this._unsubscribeToThread()}.bind(this)});t.push(c("Dialog").CANCEL);var u=void 0;m.getThreadMeta(this.props.threadID,function(v){if(v.admin_ids&&v.admin_ids.indexOf(c("MercuryViewer").getID())!==-1)u=i._("Si vous quittez ce groupe, vous n\u2019en serez plus propri\u00e9taire, et d\u2019autres membres pourront le g\u00e9rer. Vous ne pourrez plus envoyer et recevoir des messages.");else u=i._("Vous ne recevrez plus de messages de cette conversation et les personnes verront que vous l\u2019avez quitt\u00e9e.")});new(c("Dialog"))().setTitle(i._("Quitter la conversation\u00a0?")).setBody(u).setButtons(t).show()},_unsubscribeToThread:function s(){if(!m.isEmptyLocalThread(this.props.threadID)){var t=j.constructLogMessageObject(c("MercurySourceType").CHAT_WEB,this.props.threadID,c("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[c("MercuryViewer").getID()]});n.send(t)}c("FantaTabActions").closeTab(this.props.threadID);return true},_deleteConversation:function s(){c("WebMessengerDeleteThreadDialog").show(this.props.threadID,function(){return c("FantaTabActions").deleteTab(this.props.threadID)}.bind(this),null,this.linkRef)},_reportSpamClicked:function s(){var t=new(c("URI"))("/ajax/chat/report.php").addQueryData({id:this.props.otherUserID}).addQueryData({src:"top_report_link"});if(c("NFXChatHeadGK").result)t=c("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",this.props.otherUserID).setEnum("location","www_chat_head").getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(t))},_reportPageClicked:function s(){this.setState({showReportPageDialog:true})},_handleReportPageToggle:function s(){this.setState({showReportPageDialog:false})},_messageBlockedClicked:function s(){if(c("MercuryConfig").WMBF)k.blockMessages(this.props.threadID,this._hanldeAfterBlock);else k.blockMessages(this.props.threadID)},_hanldeAfterBlock:function s(){c("WebMessengerConfirmBlockDialog").show();var t=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c("CurrentUser").getID());k.changeFolder(this.props.threadID,c("MessagingTag").OTHER);c("FantaTabActions").closeTab(this.props.threadID);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(c("MessagingTag").INBOX).setThreadKey(t).setEntryPoint(null).log()},_messageManageClicked:function s(){var t=function t(u,v){return c("MNCommercePromotionBlockDataManager").block(u,v)},u=c("MercuryIDs").getUserIDFromThreadID(this.props.threadID);c("MNCommerceDialogStateActions").showDialog(c("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:u,onConfirmButtonClick:t})},_messageIgnoreClicked:function s(){k.ignoreMessages(this.props.isGroupChat?c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID):c("MercuryIDs").getUserIDFromThreadID(this.props.threadID))},_reviewClicked:function s(){var t=function t(u,v,w){if(v===0)return;c("MessengerPlatformBotReviewWriteDataManager").review(u,v,w.trim())},u=c("MercuryIDs").getUserIDFromThreadID(this.props.threadID);c("MNCommerceDialogStateActions").showDialog(c("MNCommerceReviewDialogContainer.react"),{pageID:u,onConfirmButtonClick:t})},_messageUnblockedClicked:function s(){k.unblockMessages(this.props.threadID)},_secretModeTurnOff:function s(){k.turnOffSecretMode(this.props.threadID)},_secretModeTurnOn:function s(){k.turnOnSecretMode(this.props.threadID)},_showGroupOptions:function s(){m.getThreadMeta(this.props.threadID,function(t){if(!t.is_canonical){var u=c("XMessagingGroupOptionsDialogController").getURIBuilder().setString("thread_fbid",t.thread_fbid).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(u))}})},_createGroupClicked:function s(){__p&&__p();m.getThreadMeta(this.props.threadID,function(t){if(!t.is_canonical){var u=new(c("URI"))(c("GroupsActionURIConstants").CREATE_GROUP_URI).addQueryData({ref:"web_messenger_dock",parent_id:"0"}),v=t.participants.map(function(w){return c("MercuryIDs").getUserIDFromParticipantID(w)}).filter(function(w){return w});u.addQueryData({members:v});if(t.name)u.addQueryData({name:t.name});c("AsyncDialog").send(new(c("AsyncRequest"))(u))}})},_createEventClicked:function s(){m.getThreadMeta(this.props.threadID,function(t){if(!t.is_canonical){var u=t.participants.map(function(w){return c("MercuryIDs").getUserIDFromParticipantID(w)}).filter(function(w){return w}),v=c("XEventCreateDialogController").getURIBuilder().setString("acontext",JSON.stringify({})).setIntVector("invite_ids",u).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(v))}})},open:function s(){this.refs.menu.showPopover()},_onEventPlanButtonClicked:function s(){c("ChatStartPlanDialogHelper").showDialog(this.props.threadID)}});f.exports=r}),null);
__d("MessengerUserControlsButtonReact.bs",["ix","fbt","LinkReact.bs","ImageReact.bs","bs_js_boolean","MercuryIDs","ReasonReact.bs","AsyncRequest","MessengerMenuReact.bs","MercuryParticipants","MercuryThreadActions","MessengerPopoverMenuReact.bs","MercuryServerPayloadPreprocessor","MessengerPlatformSubscriptionActionWebGraphQLMutation"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i._("Activer les mises \u00e0 jour"),k=i._("D\u00e9sactiver les mises \u00e0 jour"),l=i._("Bloquer"),m=i._("D\u00e9bloquer"),n=h("464335"),o=h("464334"),p=c("ReasonReact.bs").statelessComponent("MessengerUserControlsButton");function q(s,t,u){new(c("AsyncRequest"))(s.getURI(t)).setMethod("POST").setData(t).setHandler(u).send();return 0}function r(s,t,u,v,w,x,y){__p&&__p();var z=function z(F){var G=c("MercuryIDs").getParticipantIDFromUserID(v),H=c("MercuryParticipants").getOrFetch(G);if(H==null)return 0;else{var I=Object.assign({},H);c("MercuryServerPayloadPreprocessor").getForFBID(x).handleUpdate(Object.assign({},{participants:[Object.assign(I,{is_subscribed_to_page_updates:c("bs_js_boolean").to_js_boolean(F)})]}));return 0}},A=function A(F){var G=c("MercuryIDs").getParticipantIDFromUserID(v),H=c("MercuryParticipants").getOrFetch(G);if(H==null)return 0;else{var I=Object.assign({},H);c("MercuryServerPayloadPreprocessor").getForFBID(x).handleUpdate(Object.assign({},{participants:[Object.assign(I,{is_messenger_blocked:c("bs_js_boolean").to_js_boolean(F)})]}));return 0}},B=function B(F){var G=F.payload.data.messenger_platform_subscription_action;if(G==null)return 0;else{var H=+G.page.is_viewer_subscribed_to_message_updates;z(H);if(H&&t)return A(0);else return 0}},C=function C(){var F=u?"UNSUBSCRIBE":"SUBSCRIBE";return q(c("MessengerPlatformSubscriptionActionWebGraphQLMutation"),{client_mutation_id:0,actor_id:x,page_id:v,action_type:F},B)},D=function D(){__p&&__p();if(t){c("MercuryThreadActions").getForFBID(x).unblockOnMessengerDotCom(w);return A(0)}else{c("MercuryThreadActions").getForFBID(x).blockOnMessengerDotCom(w);A(1);if(u)return z(0);else return 0}},E=p.slice();E[9]=function(){var F=+u,G=F!==0?k:j,H=c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,G,[C],0,[])),I=+t,J=I!==0?m:l,K=c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").MenuItem[0](0,J,[D],0,[])),L=c("ReasonReact.bs").element(0,0,c("MessengerMenuReact.bs").Menu[0]([H,K])),M=+u&&1-+t,N=M!==0?n:o;return c("ReasonReact.bs").element(0,0,c("MessengerPopoverMenuReact.bs").make([s],0,0,L,0,0,[c("ReasonReact.bs").element(0,0,c("LinkReact.bs").make(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,[c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make(0,0,[N],[32],0,[40],0,[]))]))]))};return E}g.turn_on_updates=j;g.turn_off_updates=k;g.block=l;g.unblock=m;g.subscribed_button_image_path=n;g.unsubscribed_button_image_path=o;g.component=p;g.sendSubscriptionAction=q;g.make=r}),null);
__d("BootloadableMessengerUserControlsButtonReact.bs",["MessengerUserControlsButtonReact.bs"],(function a(b,c,d,e,f,g){"use strict";var h=[c("MessengerUserControlsButtonReact.bs").turn_on_updates,c("MessengerUserControlsButtonReact.bs").turn_off_updates,c("MessengerUserControlsButtonReact.bs").block,c("MessengerUserControlsButtonReact.bs").unblock,c("MessengerUserControlsButtonReact.bs").subscribed_button_image_path,c("MessengerUserControlsButtonReact.bs").unsubscribed_button_image_path,c("MessengerUserControlsButtonReact.bs").component,c("MessengerUserControlsButtonReact.bs").sendSubscriptionAction,c("MessengerUserControlsButtonReact.bs").make];g.bootloadable=h}),null);